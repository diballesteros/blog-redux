[{"_1":2},"routes/$slug",{"_3":4},"data",{"_5":6,"_27":28},"post",{"_7":8,"_9":10,"_11":12,"_13":14,"_15":16,"_19":20,"_21":22,"_23":24,"_25":26},"slug","quickly-publish-and-install-a-library-with-github-packages","title","Quickly publish and install a library with GitHub Packages","date","","description","How to publish a react library for free using the built-in functionality of Github Packages. Also, how to use said library in another project.","categories",[17,18],"react","tooling","coverImage","https://cdn.hashnode.com/res/hashnode/image/upload/v1651101763682/i-AcasCdR.png","published",true,"readingTime",5,"content","\r\n### Introduction\r\n\r\nGithub comes in with some pretty useful baked-in features, such as the ability to create your own package. In this tutorial, Iâ€™ll go over how to set up the Github Packages repository, then create a simple React hook, publish it and then install it in another project.\r\n\r\nDisclaimer: This tutorial assumes some basic knowledge of React!\r\n\r\n### What is a package?\r\n\r\nA **package** is a file or directory of code that has been privately or publically available. Normally these file(s) add functionality to your application.\r\n\r\nFor example, one of the most popular packages in the world is [lodash](https://lodash.com/) which is a â€œJavaScript utility library delivering modularity, performance, & extrasâ€ ie most commonly used for the functions it provides to make our lives a whole lot easier.\r\n\r\nThese packages typically tend to live in a folder called **node_modules** when installed locally. _Yes, that folder that weighs a ton and should never be committed to Github Repository._\r\n\r\n### Ok, is what is GitHub Packages then?\r\n\r\nGitHub Packages allows us to directly host a package we create. This comes with a whole swath of functionalities since itâ€™s tied to the GitHub ecosystem such as integrations with GitHub APIs, GitHub Actions, and webhooks.\r\n\r\nWeâ€™ll be creating our React component library as a package to host on Github Packages.\r\n\r\n### GitHub Packages Setup\r\n\r\nFirst, letâ€™s go ahead and create a new repository. GitHub already includes a thorough guide on doing so. [Link here](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository). For context, [this](https://docs.github.com/en/packages/quickstart) is GitHubâ€™s official guide for the setup of the package repository as well.\r\n\r\n![repo](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094537481/uBYjITlFH.png)\r\n\r\nWith that out of the way letâ€™s open up Visual Studio Code or your IDE of choice and clone it locally. In the repo click on code and grab the clone link.\r\n\r\n![clone repo](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094538617/c8Tyn2xFH.png)\r\n\r\nAnd clone it into our local machine.\r\n\r\n![terminal cloning](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094539878/o0vKElBj6.png)\r\n\r\nSweet! Now we can initialize npm to generate our package.json\r\n\r\nYouâ€™ll be asked several questions about the new package. Remember to leave the name as:\r\n\r\n```bash\r\n@YOUR-USERNAME/YOUR-REPOSITORY\r\n...\r\ntest command: exit 0\r\n...\r\n```\r\n\r\n![repo hookup](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094541065/0NzAk1JDA.png)\r\n\r\nRun the following commands:\r\n\r\n```bash\r\nnpm install\r\ngit add .\r\ngit commit -m \"initialize npm package\"\r\ngit push\r\n```\r\n\r\n### Building the React hook\r\n\r\nWeâ€™ll build a simple React package. As you may have seen I named my package useless-hooks . So I'll add a generic useless hook. In this case, useKonamiCode which just added an event listener for user input. If the user inputs a certain combination of keys in a row then it'll trigger a callback.\r\n\r\nThe main takeaway here is to just create your hook and place it in the src folder:\r\n\r\n![created hook file](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094542464/tBXGGZQQN.png)\r\n\r\n### Publishing in Github Packages\r\n\r\nWe will be using GitHub actions to make sure we can publish our package. This article wonâ€™t go into depth about that but I do have a [few](https://relatablecode.com/how-to-add-cypress-codecov-in-github-actions-in-react-app/) that takes advantage of the functionality.\r\n\r\nWhatâ€™s important to know is that GitHub checks if your repository has a .github folder at the root of your directory and for a workflows subfolder.\r\n\r\n### What is YAML?\r\n\r\nHereâ€™s a definition straight from their site:\r\n\r\n> _YAML is a human-friendly data serialization language for all programming languages_\r\n\r\n> [_https://yaml.org/_](https://yaml.org/)\r\n\r\nIn this case, every time we create a release in GitHub it will publish the package for us following the workflow laid out in the file.\r\n\r\nCreate the following folders and files at the root of the directory:\r\n\r\n![yml directory](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094543621/LqJsJWhsK.png)\r\n\r\nAnd in the file add the following lines:\r\n\r\n![yaml files](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094545091/FV2uStGWi.png)\r\n\r\n### Hooking it up to npm\r\n\r\nNow we can hook it up to NPM by creating a .npmrc file at the root directory and adding the following line (and replacing YOUR-USERNAME with your GitHub username:\r\n\r\n```bash\r\n@YOUR-USERNAME:registry=https://npm.pkg.github.com\r\n```\r\n\r\nor by creating the following entry in the package.json\r\n\r\n```\r\n\"publishConfig\": {\r\n    \"registry\": \"https://npm.pkg.github.com\"\r\n},\r\n```\r\n\r\nLast but not least weâ€™ll push up all our changes to the repository:\r\n\r\n```bash\r\ngit add .\r\ngit commit -m \"workflow to publish package\"\r\ngit push\r\n```\r\n\r\n### Creating a release\r\n\r\nTo create the release head over to your repo on GitHub and on the right side youâ€™ll see a **Releases** section. Go ahead and create a new release.\r\n\r\n![creating release](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094546599/K6gePJdd1.png)\r\n\r\nAfterward, in the new screen, you can create the release by adding the tag, title, and description and then hitting **Publish Release.**\r\n\r\n![publishing release](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094548073/8iYd8VBy9.png)\r\n\r\nNow in the GitHub Actions tab, weâ€™ll see our workflow running! ( _You might see the version as 1.0.1, I forgot to upload the YAML file with any contentâ€¦._ ðŸ˜…)\r\n\r\n![github action for release](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094549233/HjKGeNzjl.png)\r\n\r\nSuccess!\r\n\r\n![npm package in repo](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094550393/CxXRWjS_de.png)\r\n\r\n### Installing the GitHub Packages library\r\n\r\nIâ€™ll just bootstrap an app for the sake of the example with the following commands:\r\n\r\n```bash\r\nnpx create-react-app my-app\r\ncd my-app\r\n```\r\n\r\nNormally, Iâ€™d be able to use npm install useless-hooks directly, but first, we have to point our app to the GitHub Packages.\r\n\r\nFirst, we have to authenticate to GitHub Packages. Iâ€™ll leave this guide here by GitHub themselves: [Link](https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#authenticating-to-github-packages)\r\n\r\nCreate a .npmrc file at the root of our project.\r\n\r\n![npmrc file](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094551466/SVgmvg5Lc.png)\r\n\r\nReplace @diballesteros with your GitHub user name or the one you used to create the package.\r\n\r\nAnd in our package.json weâ€™ll include the new dependency:\r\n\r\n```json\r\n\"dependencies\": {\r\n    ...other dependencies,\r\n    \"@diballesteros/useless-hooks\": \"^1.0.1\"\r\n}\r\n```\r\n\r\nAnd run:\r\n\r\n```bash\r\nnpm install\r\n```\r\n\r\n### Using the GitHub Packages library\r\n\r\nFinally, we can use our package!\r\n\r\nIn our App.js we can import it like any other library:\r\n\r\n![app.js importing our package](https://cdn.hashnode.com/res/hashnode/image/upload/v1649094552642/hLjr2xGO5.png)\r\n\r\n### Conclusion\r\n\r\nYou can find the repository [here](https://github.com/diballesteros/useless-hooks). There are more publishes than in this article because I ran into a few issues while authenticating.\r\n\r\nIf you liked this feel free to connect with me on [LinkedIn](https://www.linkedin.com/in/relatablecode) or [Twitter](https://twitter.com/relatablecoder)\r\n\r\nCheck out my free developer roadmap and weekly tech industry news in my [newsletter](https://relatablecode.substack.com/).\r\n","recommendations",[29,37,45,50],{"_7":30,"_9":31,"_11":12,"_13":32,"_15":33,"_19":35,"_21":22,"_23":36},"what-is-imposter-syndrome-and-how-i-deal-with-it","What is imposter syndrome? And how I deal with it","Imposter syndrome is a common feeling to have as a software developer even if you've been doing it for years. I go over my personal experiences with it.",[34],"devlog","https://cdn.hashnode.com/res/hashnode/image/upload/v1651102112425/KKsbnfbCK.png",4,{"_7":38,"_9":39,"_11":12,"_13":40,"_15":41,"_19":43,"_21":22,"_23":44},"testing-a-reaction-application-updating-to-cypress-version-10","Testing a Reaction Application updating to Cypress Version 10","Testing a modern React application. In this part of the series, we go over how to update Cypress to version 10.",[42,17],"testing","https://cdn.hashnode.com/res/hashnode/image/upload/v1651098470347/9coA_akWr.png",3,{"_7":46,"_9":47,"_11":12,"_13":48,"_15":49,"_19":43,"_21":22,"_23":24},"testing-a-react-application-working-with-codecov","Testing a React Application Working with Codecov","How to test a React web application and upload the test code coverage results to Codecov.",[42,17],{"_7":51,"_9":52,"_11":12,"_13":53,"_15":54,"_19":43,"_21":22,"_23":36},"testing-a-react-application-what-is-vitest","Testing a React Application What is Vitest?","The third part of a series of articles on how to test a React Application. I go over how Vitest and its syntax work in the simplest terms.",[42,17]]
