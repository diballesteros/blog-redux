[{"_1":2},"routes/$slug",{"_3":4},"data",{"_5":6,"_27":28},"post",{"_7":8,"_9":10,"_11":12,"_13":14,"_15":16,"_19":20,"_21":22,"_23":24,"_25":26},"slug","testing-a-react-application-working-with-codecov","title","Testing a React Application Working with Codecov","date","","description","How to test a React web application and upload the test code coverage results to Codecov.","categories",[17,18],"testing","react","coverImage","https://cdn.hashnode.com/res/hashnode/image/upload/v1651098470347/9coA_akWr.png","published",true,"readingTime",5,"content","\r\n### Introduction\r\n\r\nIn the previous article, we began our setup for [Codecov](https://about.codecov.io/) by instrumenting our codebase. In this final article, we'll finish our setup with a GitHub workflow that will automatically submit our coverage results.\r\n\r\nJust to give a small recap this is what code coverage is and what our application does:\r\n\r\n> Code coverage is a software testing metric that determines the number of lines of code that is successfully validated under a test procedure, which in turn, helps in analyzing how comprehensively a software is verified. [Source](https://www.codegrip.tech/productivity/everything-you-need-to-know-about-code-coverage/)\r\n\r\nCool! Next, let's go over what our application does. When clicking on a button it fetches posts from a service and displays them on the page:\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665925010885/Tx4k7hKN6.png)\r\n\r\nYou find the full repository https://github.com/diballesteros/react-testing\r\n\r\n### What is a GitHub workflow?\r\n\r\nLet's check out the official docs from GitHub for a clear definition:\r\n\r\n> A workflow is a configurable automated process that will run one or more jobs. Workflows are defined by a YAML file checked in to your repository and will run when triggered by an event in your repository, or they can be triggered manually, or at a defined schedule\r\n\r\nThat's a lot to take in. Essentially we can create a folder at the root directory of our project that Github will **automatically** detect to implement the \"workflow\". Magic!\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665925478055/1MlCvki9r.png)\r\n\r\nThese actions can be monitored in the `Actions` tab in a repository.\r\n\r\nAwesome! But how does this help us? Well, we're going to create our very own [YAML](https://yaml.org/) file to create a workflow that will trigger on every `push` to our repository. This way our code coverage will always stay up to date.\r\n\r\nTo find out more about workflows and GitHub actions check out the [official docs](https://docs.github.com/en/actions/using-workflows/about-workflows).\r\n\r\n### Creating our workflow\r\n\r\nIn the root directory of our project create a `.github` folder and inside of that create a `workflows` folder with a single `main.yml` file inside.\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665926531817/Fs4xgRqs4.png)\r\n\r\nYAML files have a fairly simple structure that is very dependent on the spacing of each line to know what the next step is. Highly recommend checking out their docs if you're not too familiar with them.\r\n\r\nLet's start off by giving our workflow a name and making it trigger on `push`.\r\n\r\n```yaml\r\nname: Coverage\r\non: [push]\r\n```\r\n\r\nAfterward, we can start setting up our steps. Let's think about what this implies. GitHub is spinning up an environment to run our tests. This means that in this environment we must have all the necessary dependencies for Cypress to run correctly.\r\n\r\nThis may seem complicated at first, but it'll soon make sense.\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665927038143/an5ZKpK4i.png)\r\n\r\nWe can start adding jobs to our workflow file to do just this:\r\n\r\n```yaml\r\njobs:\r\n    tests:\r\n        runs-on: ubuntu-latest\r\n        container: cypress/browsers:node14.17.0-chrome88-ff89\r\n        steps:\r\n            - name: ðŸ›« Checkout\r\n              uses: actions/checkout@v3\r\n\r\n            - name: ðŸŒ² Cypress install\r\n              uses: cypress-io/github-action@v4\r\n              with:\r\n                  runTests: false\r\n            - run: npm run build\r\n```\r\n\r\n`runs-on` specifies the environment we'll use to install our dependencies. To make it simple we'll just use the latest version of Ubuntu that is available.\r\n\r\n`container` is the browser.\r\n\r\nThe `Checkout` step gets our code from the repo. Then we install Cypress.\r\n\r\nTo add to this we'll use some actions directly from Cypress to run our tests and upload them to Codecov.\r\n\r\n```yaml\r\njobs:\r\n    tests:\r\n        runs-on: ubuntu-latest\r\n        container: cypress/browsers:node14.17.0-chrome88-ff89\r\n        steps:\r\n            - name: ðŸ›« Checkout\r\n              uses: actions/checkout@v3\r\n\r\n            - name: ðŸŒ² Cypress install\r\n              uses: cypress-io/github-action@v4\r\n              with:\r\n                  runTests: false\r\n            - run: npm run build\r\n\r\n            - name: ðŸ’» 'UI Tests'\r\n              uses: cypress-io/github-action@v4\r\n              with:\r\n                  start: npm run dev\r\n                  wait-on: http://localhost:3000\r\n                  wait-on-timeout: 120\r\n                  browser: chrome\r\n                  spec: 'cypress/integration/first-test.spec.js'\r\n\r\n            - name: âœ… Upload coverage to Codecov\r\n              uses: codecov/codecov-action@v3.1.0\r\n```\r\n\r\n`UI Tests` will look for the GitHub action directly from Cypress to run our test in a chrome browser. Something very important to note is that in the `spec` property we specified only the test we created: `first-test.spec.js`.\r\n\r\nYou can use an `*` to capture all files. For example: `cypress/integration/*`.\r\n\r\nOur final step will upload it to Codecov using a GitHub action they have provided for us.\r\n\r\n### The GitHub Action\r\n\r\nAfter committing and pushing up the new changes we'll finally be able to test it out. If you head to the repository and go to the GitHub Actions tab you'll see the action automatically running:\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665929641523/UvGU_EC4m.png)\r\n\r\nIf you click on the action you'll be able to see a detailed view of what tasks are being run and the steps.\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665930774606/SIEh3uNMr.png)\r\n\r\nIn the screenshot above I made a mistake with the `run` command for the project.\r\n\r\n### Wrapping it up\r\n\r\nWe'll now be able to see the results in Codecov in our project list:\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665936348633/tjrY-U6aR.png)\r\n\r\nWe'll also see how much coverage we actually have:\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665936388853/xtKPGBkMM.png)\r\n\r\nWe can also see what lines are not being covered:\r\n\r\n![image.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1665936424739/f66SCRO1h.png)\r\n\r\nCheck out the official Codecov docs for more info on how to navigate the dashboard:\r\n\r\n[https://docs.codecov.com/docs](https://docs.codecov.com/docs)\r\n\r\nThat wraps up my series. I hope you enjoyed it! Testing is a fundamental part of the software development process and is something that should not be skimmed over.\r\n\r\nThankfully modern-day testing has a plethora of tools that make our job easier. If you have any more questions regarding testing leave them in the comments section below!\r\n\r\n### Let's connect\r\n\r\nIf you liked this feel free to connect with me on [LinkedIn](https://www.linkedin.com/in/relatablecode) or [Twitter](https://twitter.com/relatablecoder)\r\n\r\nCheck out my free developer roadmap and weekly tech industry news in my [newsletter](https://relatablecode.substack.com/).\r\n","recommendations",[29,37,43,48],{"_7":30,"_9":31,"_11":12,"_13":32,"_15":33,"_19":35,"_21":22,"_23":36},"what-is-imposter-syndrome-and-how-i-deal-with-it","What is imposter syndrome? And how I deal with it","Imposter syndrome is a common feeling to have as a software developer even if you've been doing it for years. I go over my personal experiences with it.",[34],"devlog","https://cdn.hashnode.com/res/hashnode/image/upload/v1651102112425/KKsbnfbCK.png",4,{"_7":38,"_9":39,"_11":12,"_13":40,"_15":41,"_19":20,"_21":22,"_23":42},"testing-a-reaction-application-updating-to-cypress-version-10","Testing a Reaction Application updating to Cypress Version 10","Testing a modern React application. In this part of the series, we go over how to update Cypress to version 10.",[17,18],3,{"_7":44,"_9":45,"_11":12,"_13":46,"_15":47,"_19":20,"_21":22,"_23":36},"testing-a-react-application-what-is-vitest","Testing a React Application What is Vitest?","The third part of a series of articles on how to test a React Application. I go over how Vitest and its syntax work in the simplest terms.",[17,18],{"_7":49,"_9":50,"_11":12,"_13":51,"_15":52,"_19":20,"_21":22,"_23":36},"testing-a-react-application-the-setup","Testing a React Application The Setup","In the second part of my series on how to perform modern testing for a React application, I go over the setup of the react application and the testing packages.",[17,18]]
