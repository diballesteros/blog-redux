[{"_1":2},"routes/$slug",{"_3":4},"data",{"_5":6,"_26":27},"post",{"_7":8,"_9":10,"_11":12,"_13":14,"_15":16,"_18":19,"_20":21,"_22":23,"_24":25},"slug","how-to-share-dynamically-generated-images-in-react","title","How to share dynamically generated images in React","date","","description","How to share dynamically generated images in React to various social media sites, email, clipboard and various other options","categories",[17],"react","coverImage","https://cdn.hashnode.com/res/hashnode/image/upload/v1651104183108/LniMoFS6s.png","published",true,"readingTime",3,"content","\r\n### Introduction\r\n\r\nI have been developing a [pokémon related app](https://nuzlocke.netlify.app) where you can track encounters. Throughout the process I also added a way to generate a summary image of the run:\r\n\r\n![Image description](https://cdn.hashnode.com/res/hashnode/image/upload/v1649276400145/zmSMrgPEB.png)\r\n\r\nGenerating the image was easy enough, but typically most users would want to share that image directly to a social media site. In comes the [Web Share API](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share)! With this it can natively check for methods from the OS to share the site, so direct integration with Facebook, Twitter, Reddit, etc is unnecessary.\r\n\r\n**DISCLAIMER**: For the time being this API has limited compatibility across some operating systems and browsers. Check out https://caniuse.com/?search=navigator.share for the current state.\r\n\r\n### The Requirements\r\n\r\n-   Share button\r\n-   Dynamically generate an image from the HTML\r\n-   When clicking the share button share the image to a variety of different options\r\n\r\n### The Setup\r\n\r\nBefore anything else, to dynamically generate the image a third-party library is necessary. In this tutorial, I will be using [html-to-image](https://www.npmjs.com/package/html-to-image). Cool! Now, let’s go ahead and start setting up the share button.\r\n\r\n```js\r\n<div>\r\n\t<h1>Dynamically generate and share images</h1>\r\n\t<button>Share</button>\r\n\t<div>// ...Dynamically generated content</div>\r\n</div>\r\n```\r\n\r\nSimple enough. In order to extract the content let’s set up html-to-image. First, we need to hook up the div that’s going to contain the dynamic content with a ref using the useRef hook from React.\r\n\r\n```js\r\nconst imageRef = useRef(null);\r\n\r\n<div>\r\n\t<h1>Dynamically generate and share images</h1>\r\n\t<button>Share</button>\r\n\t<div ref={imageRef}>// ...Dynamically generated content</div>\r\n</div>;\r\n```\r\n\r\n### Create and share the image\r\n\r\nhtml-to-image provides us with a function to directly take out the HTML element and create an image: toBlob. Here we create the function:\r\n\r\n```js\r\nconst handleShare = async () => {\r\n\tconst newFile = await toBlob(imageRef.current);\r\n\tconst data = {\r\n\t\tfiles: [\r\n\t\t\tnew File([newFile], 'image.png', {\r\n\t\t\t\ttype: newFile.type,\r\n\t\t\t}),\r\n\t\t],\r\n\t\ttitle: 'Image',\r\n\t\ttext: 'image',\r\n\t};\r\n};\r\n```\r\n\r\nAlso, we must format the result to correctly be able to share. We can do this by making the image into a Blob by extracting the current value from the Ref as well as setting a title and text.\r\n\r\n```js\r\nconst handleShare = async () => {\r\n\tconst newFile = await toBlob(imageRef.current);\r\n\tconst data = {\r\n\t\tfiles: [\r\n\t\t\tnew File([newFile], 'image.png', {\r\n\t\t\t\ttype: newFile.type,\r\n\t\t\t}),\r\n\t\t],\r\n\t\ttitle: 'Image',\r\n\t\ttext: 'image',\r\n\t};\r\n\r\n\ttry {\r\n\t\tawait navigator.share(data);\r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n};\r\n```\r\n\r\nSharing the image is as simple as sharing the constructed data. This will automatically bring up a list of options available. But, wait! Earlier I mentioned compatibility issues, for that reason I added a try and catch, but we can take this a step further, the API also provides us a function to check if the data can be shared at all: navigator.canShare.\r\n\r\n```js\r\ntry {\r\n\tif (!navigator.canShare(data)) {\r\n\t\tconsole.error(\"Can't share\");\r\n\t}\r\n\tawait navigator.share(data);\r\n} catch (err) {\r\n\tconsole.error(err);\r\n}\r\n```\r\n\r\nCheck out the end result with the function hooked up to the button:\r\n\r\nHow the share shows up on mobile:\r\n\r\n![Image description](https://cdn.hashnode.com/res/hashnode/image/upload/v1649276401796/ZG9_mu1rp.png)\r\n","recommendations",[28,36,43,49],{"_7":29,"_9":30,"_11":12,"_13":31,"_15":32,"_18":34,"_20":21,"_22":35},"what-is-imposter-syndrome-and-how-i-deal-with-it","What is imposter syndrome? And how I deal with it","Imposter syndrome is a common feeling to have as a software developer even if you've been doing it for years. I go over my personal experiences with it.",[33],"devlog","https://cdn.hashnode.com/res/hashnode/image/upload/v1651102112425/KKsbnfbCK.png",4,{"_7":37,"_9":38,"_11":12,"_13":39,"_15":40,"_18":42,"_20":21,"_22":23},"testing-a-reaction-application-updating-to-cypress-version-10","Testing a Reaction Application updating to Cypress Version 10","Testing a modern React application. In this part of the series, we go over how to update Cypress to version 10.",[41,17],"testing","https://cdn.hashnode.com/res/hashnode/image/upload/v1651098470347/9coA_akWr.png",{"_7":44,"_9":45,"_11":12,"_13":46,"_15":47,"_18":42,"_20":21,"_22":48},"testing-a-react-application-working-with-codecov","Testing a React Application Working with Codecov","How to test a React web application and upload the test code coverage results to Codecov.",[41,17],5,{"_7":50,"_9":51,"_11":12,"_13":52,"_15":53,"_18":42,"_20":21,"_22":35},"testing-a-react-application-what-is-vitest","Testing a React Application What is Vitest?","The third part of a series of articles on how to test a React Application. I go over how Vitest and its syntax work in the simplest terms.",[41,17]]
