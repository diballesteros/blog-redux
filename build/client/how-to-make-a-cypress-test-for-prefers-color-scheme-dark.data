[{"_1":2},"routes/$slug",{"_3":4},"data",{"_5":6,"_26":27},"post",{"_7":8,"_9":10,"_11":12,"_13":14,"_15":16,"_18":19,"_20":21,"_22":23,"_24":25},"slug","how-to-make-a-cypress-test-for-prefers-color-scheme-dark","title","How to make a Cypress test for prefers-color-scheme dark","date","","description","Blog post on how to quickly make a cypress end-to-end test for checking if the dark mode styles are applied if the user has set prefers-color-scheme dark.","categories",[17],"testing","coverImage","https://cdn.hashnode.com/res/hashnode/image/upload/v1639932516028/v5wJOpkTs.jpeg","published",true,"readingTime",2,"content","\r\n### Introduction\r\n\r\nTaking into account the userâ€™s preferences before the page loads are becoming more important every day to deliver the best possible experience out-of-the-box. One such option is the CSS [media feature](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) of prefers-color-scheme. This can be set up through the operating system or user agent setting.\r\n\r\nThe following is an example of how to set up dark mode through CSS:\r\n\r\n![css dark mode](https://cdn.hashnode.com/res/hashnode/image/upload/v1639932517496/mRPZ2xa-x.png)\r\n\r\nAs an aside I also have an article on how to quickly set up dark mode with the use of CSS variables in React, check it out [here](https://relatablecode.com/how-to-easily-add-dark-mode-to-a-react-app/).\r\n\r\n### Cypress Test\r\n\r\n[Cypress](https://www.cypress.io/) is a testing framework that makes it super easy and fun to develop end-to-end tests! Cypress offers a function to set up variables before the page loads! We can use this to set up the preference for dark mode ahead of time.\r\n\r\n![Cypress test for dark mode](https://cdn.hashnode.com/res/hashnode/image/upload/v1639932519044/VRNfvk2dP.png)\r\n\r\nUsing the onBeforeLoad function when we visit the root page we can alter what happens when we interact with the matchMedia function. [matchMedia](https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia) is a method on the window object that can check if the color scheme is dark. In my app I use a hook to check exactly this when applying dark mode, as its set to a variable in my global store:\r\n\r\n![Hook to set dark mode](https://cdn.hashnode.com/res/hashnode/image/upload/v1639932520659/23Iuuy1e5.png)\r\n\r\nNeat! Alright, the following parts of the Cypress test can directly look at the different CSS properties of the page to make sure everything is being applied correctly:\r\n\r\n![Additional testing for CSS properties](https://cdn.hashnode.com/res/hashnode/image/upload/v1639932522223/nf_Mu10LyL.png)\r\n\r\nAs an example, the app is the overall wrapper of my app. Gave it a data-testid and then I test for the color of my dark mode. This can be done several times over for all the different types of dark mode properties that are being set!\r\n","recommendations",[28,36,44,50],{"_7":29,"_9":30,"_11":12,"_13":31,"_15":32,"_18":34,"_20":21,"_22":35},"what-is-imposter-syndrome-and-how-i-deal-with-it","What is imposter syndrome? And how I deal with it","Imposter syndrome is a common feeling to have as a software developer even if you've been doing it for years. I go over my personal experiences with it.",[33],"devlog","https://cdn.hashnode.com/res/hashnode/image/upload/v1651102112425/KKsbnfbCK.png",4,{"_7":37,"_9":38,"_11":12,"_13":39,"_15":40,"_18":42,"_20":21,"_22":43},"testing-a-reaction-application-updating-to-cypress-version-10","Testing a Reaction Application updating to Cypress Version 10","Testing a modern React application. In this part of the series, we go over how to update Cypress to version 10.",[17,41],"react","https://cdn.hashnode.com/res/hashnode/image/upload/v1651098470347/9coA_akWr.png",3,{"_7":45,"_9":46,"_11":12,"_13":47,"_15":48,"_18":42,"_20":21,"_22":49},"testing-a-react-application-working-with-codecov","Testing a React Application Working with Codecov","How to test a React web application and upload the test code coverage results to Codecov.",[17,41],5,{"_7":51,"_9":52,"_11":12,"_13":53,"_15":54,"_18":42,"_20":21,"_22":35},"testing-a-react-application-what-is-vitest","Testing a React Application What is Vitest?","The third part of a series of articles on how to test a React Application. I go over how Vitest and its syntax work in the simplest terms.",[17,41]]
