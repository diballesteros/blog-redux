import{a as i,p as s,L as A}from"./chunk-WWGJGFF6-vkLKAKmh.js";import{M as S,i as D,a as z,P as F,b as B,d as V,L as O,c as L,u as W,m as b}from"./use-reduced-motion-18noL8zC.js";function Z({title:t,titleId:e,...n},o){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":e},n),t?i.createElement("title",{id:e},t):null,i.createElement("path",{fillRule:"evenodd",d:"M3 10a.75.75 0 0 1 .75-.75h10.638L10.23 5.29a.75.75 0 1 1 1.04-1.08l5.5 5.25a.75.75 0 0 1 0 1.08l-5.5 5.25a.75.75 0 1 1-1.04-1.08l4.158-3.96H3.75A.75.75 0 0 1 3 10Z",clipRule:"evenodd"}))}const K=i.forwardRef(Z);function U({title:t,titleId:e,...n},o){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":e},n),t?i.createElement("title",{id:e},t):null,i.createElement("path",{fillRule:"evenodd",d:"M4.25 5.5a.75.75 0 0 0-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 0 0 .75-.75v-4a.75.75 0 0 1 1.5 0v4A2.25 2.25 0 0 1 12.75 17h-8.5A2.25 2.25 0 0 1 2 14.75v-8.5A2.25 2.25 0 0 1 4.25 4h5a.75.75 0 0 1 0 1.5h-5Z",clipRule:"evenodd"}),i.createElement("path",{fillRule:"evenodd",d:"M6.194 12.753a.75.75 0 0 0 1.06.053L16.5 4.44v2.81a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.553l-9.056 8.194a.75.75 0 0 0-.053 1.06Z",clipRule:"evenodd"}))}const _=i.forwardRef(U);function P(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function q(...t){return e=>{let n=!1;const o=t.map(a=>{const r=P(a,e);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let a=0;a<o.length;a++){const r=o[a];typeof r=="function"?r():P(t[a],null)}}}}function G(...t){return i.useCallback(q(...t),t)}class X extends i.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const o=n.offsetParent,a=D(o)&&o.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=a-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function J({children:t,isPresent:e,anchorX:n,root:o}){const a=i.useId(),r=i.useRef(null),m=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:v}=i.useContext(S),C=G(r,t?.ref);return i.useInsertionEffect(()=>{const{width:l,height:w,top:c,left:f,right:h}=m.current;if(e||!r.current||!l||!w)return;const g=n==="left"?`left: ${f}`:`right: ${h}`;r.current.dataset.motionPopId=a;const u=document.createElement("style");v&&(u.nonce=v);const j=o??document.head;return j.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${w}px !important;
            ${g}px !important;
            top: ${c}px !important;
          }
        `),()=>{j.contains(u)&&j.removeChild(u)}},[e]),s.jsx(X,{isPresent:e,childRef:r,sizeRef:m,children:i.cloneElement(t,{ref:C})})}const Q=({children:t,initial:e,isPresent:n,onExitComplete:o,custom:a,presenceAffectsLayout:r,mode:m,anchorX:v,root:C})=>{const l=z(Y),w=i.useId();let c=!0,f=i.useMemo(()=>(c=!1,{id:w,initial:e,isPresent:n,custom:a,onExitComplete:h=>{l.set(h,!0);for(const g of l.values())if(!g)return;o&&o()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,o]);return r&&c&&(f={...f}),i.useMemo(()=>{l.forEach((h,g)=>l.set(g,!1))},[n]),i.useEffect(()=>{!n&&!l.size&&o&&o()},[n]),m==="popLayout"&&(t=s.jsx(J,{isPresent:n,anchorX:v,root:C,children:t})),s.jsx(F.Provider,{value:f,children:t})};function Y(){return new Map}const R=t=>t.key||"";function $(t){const e=[];return i.Children.forEach(t,n=>{i.isValidElement(n)&&e.push(n)}),e}const ee=({children:t,custom:e,initial:n=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:r="sync",propagate:m=!1,anchorX:v="left",root:C})=>{const[l,w]=B(m),c=i.useMemo(()=>$(t),[t]),f=m&&!l?[]:c.map(R),h=i.useRef(!0),g=i.useRef(c),u=z(()=>new Map),[j,I]=i.useState(c),[x,M]=i.useState(c);V(()=>{h.current=!1,g.current=c;for(let p=0;p<x.length;p++){const d=R(x[p]);f.includes(d)?u.delete(d):u.get(d)!==!0&&u.set(d,!1)}},[x,f.length,f.join("-")]);const N=[];if(c!==j){let p=[...c];for(let d=0;d<x.length;d++){const y=x[d],E=R(y);f.includes(E)||(p.splice(d,0,y),N.push(y))}return r==="wait"&&N.length&&(p=N),M($(p)),I(c),null}const{forceRender:T}=i.useContext(O);return s.jsx(s.Fragment,{children:x.map(p=>{const d=R(p),y=m&&!l?!1:c===x||f.includes(d),E=()=>{if(u.has(d))u.set(d,!0);else return;let k=!0;u.forEach(H=>{H||(k=!1)}),k&&(T?.(),M(g.current),m&&w?.(),o&&o())};return s.jsx(Q,{isPresent:y,initial:!h.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:r,root:C,onExitComplete:y?void 0:E,anchorX:v,children:p},d)})})};function ae({children:t,className:e=""}){return s.jsx("h2",{className:L("font-medium text-header",e),children:t})}function te({children:t,className:e=""}){return s.jsx("h3",{className:L("text-lg font-medium",e),children:t})}function ne({copied:t,id:e,text:n}){const o=W(),a={hidden:{opacity:0},visible:()=>({opacity:1,transition:{opacity:{duration:o?0:.5}}})};return s.jsx(ee,{children:t?s.jsxs(s.Fragment,{children:[n?`${n[1]} `:"",s.jsxs(b.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",initial:"hidden",animate:"visible",exit:o?void 0:"hidden",children:[s.jsx(b.path,{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z",variants:a}),s.jsx(b.path,{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd",variants:a})]},`${e}-copied`)]}):s.jsxs(s.Fragment,{children:[n?`${n[0]} `:"",s.jsxs(b.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",initial:"hidden",animate:"visible",exit:o?void 0:"hidden",children:[s.jsx(b.path,{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z",variants:a}),s.jsx(b.path,{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z",variants:a})]},`${e}-not-copied`)]})})}function se(t){const[e,n]=i.useState(!1);return i.useEffect(()=>{if(e){const r=setTimeout(()=>n(!1),2e3);return()=>clearTimeout(r)}},[e]),{copied:e,handleCopy:async r=>{if(r.preventDefault(),r.stopPropagation(),!!navigator?.clipboard)try{await navigator.clipboard.writeText(t??""),n(!0)}catch{}},handleManualCopy:async r=>{if(navigator?.clipboard)try{await navigator.clipboard.writeText(r),n(!0)}catch{}}}}const re=new Intl.ListFormat("en",{style:"short",type:"unit"});function le({noImage:t=!1,post:e}){const{copied:n,handleCopy:o}=se(`https://relatablecode.com/${e.slug}`),a=r=>{r.preventDefault(),r.stopPropagation(),window.open(`/${e.slug}`,"_blank")};return s.jsxs("div",{className:"group relative flex h-full transition-all duration-300 focus-within:scale-[1.03] hover:scale-[1.03] motion-reduce:focus-within:scale-100 motion-reduce:hover:scale-100 focus-within:dark:bg-slate-900 dark:hover:bg-slate-900",children:[s.jsx("div",{className:"absolute -inset-0.5 z-[1] h-full rounded-lg bg-sky-500 bg-opacity-0 blur transition-all duration-300 group-focus-within:bg-opacity-80 group-hover:bg-opacity-80"}),s.jsxs(A,{to:`/${e.slug}`,className:"relative z-[2] flex h-full w-full cursor-pointer flex-col rounded-lg",tabIndex:0,title:e.title,children:[s.jsxs("div",{className:"absolute right-2 top-2 z-[1] flex flex-col gap-4 opacity-0 transition-opacity group-active:opacity-100 group-hover:lg:opacity-100",children:[s.jsx("button",{className:"flex w-28 items-center justify-between rounded-md bg-white p-2 font-semibold text-black shadow-lg",onClick:o,tabIndex:-1,type:"button",children:s.jsx(ne,{copied:n,id:e.slug,text:["Copy link","Copied"]})}),s.jsxs("button",{className:"flex w-28 items-center justify-between rounded-md bg-white p-2 font-semibold text-black shadow-lg",onClick:a,tabIndex:-1,type:"button",children:["New tab ",s.jsx(_,{className:"h-4 w-4"})]})]}),!t&&e.coverImage?s.jsx("img",{alt:e.title,className:"hidden aspect-[21/9] h-[17.4rem] rounded-tl-lg rounded-tr-lg lg:block",src:e.coverImage}):null,s.jsxs("div",{className:"flex flex-1 flex-col rounded-lg bg-bgSecondary p-4 text-primary lg:rounded-tl-none lg:rounded-tr-none",children:[s.jsx(te,{className:"mb-2 group-hover:text-sky-800 group-hover:transition-all dark:group-hover:text-sky-400",children:e.title}),s.jsx("p",{className:"mb-4",children:e.description}),s.jsxs("div",{className:"mt-auto flex gap-2 text-secondary",children:[e.date?s.jsx("time",{dateTime:e.date,children:new Date(e.date).toLocaleDateString("en",{month:"short",year:"numeric",day:"numeric"})}):null,e.categories?.length?s.jsxs("p",{className:"flex gap-1 text-header",children:[s.jsx("em",{className:"text-secondary",children:"in"})," ",re.format(e.categories)]}):null,s.jsxs("span",{className:"ml-auto inline-flex items-center gap-1",children:[e.readingTime??1," min read ",s.jsx(K,{className:"h-3 w-3"})]})]})]})]})]})}export{ae as H,le as P};
